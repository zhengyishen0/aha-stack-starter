---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Dropdown from '../../components/pine/Dropdown.astro';
import Badge from '../../components/pine/Badge.astro';
---

<Layout title="Dropdown Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">Dropdown Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">‚Üê Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Placement Options Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Placement Options</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Bottom Placements -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Bottom Placements</h3>
            <div class="flex gap-4 justify-center">
              <Dropdown placement="bottom-start">
                <div slot="trigger">
                  <Button variant="solid" color="blue">Bottom Start</Button>
                </div>
                <div slot="menu">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                  <hr class="my-1">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
                </div>
              </Dropdown>

              <Dropdown placement="bottom-end">
                <div slot="trigger">
                  <Button variant="solid" color="green">Bottom End</Button>
                </div>
                <div slot="menu">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Dashboard</a>
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Analytics</a>
                  <hr class="my-1">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Export</a>
                </div>
              </Dropdown>
            </div>
          </div>

          <!-- Top Placements -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Top Placements</h3>
            <div class="flex gap-4 justify-center">
              <Dropdown placement="top-start">
                <div slot="trigger">
                  <Button variant="outline" color="purple">Top Start</Button>
                </div>
                <div slot="menu">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Home</a>
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">About</a>
                  <hr class="my-1">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Contact</a>
                </div>
              </Dropdown>

              <Dropdown placement="top-end">
                <div slot="trigger">
                  <Button variant="outline" color="red">Top End</Button>
                </div>
                <div slot="menu">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Help</a>
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Documentation</a>
                  <hr class="my-1">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Support</a>
                </div>
              </Dropdown>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Different Menu Content Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Different Menu Content</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Links Menu -->
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-3">Links Menu</h3>
            <Dropdown placement="bottom-start">
              <div slot="trigger">
                <Button variant="solid" color="blue">Navigation Menu</Button>
              </div>
              <div slot="menu">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">Dashboard</span>
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">Projects</span>
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">Team</span>
                </a>
                <hr class="my-1 border-gray-200">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">Settings</span>
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors">
                  <span class="font-medium">Sign Out</span>
                </a>
              </div>
            </Dropdown>
          </div>

          <!-- Button Actions Menu -->
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-3">Button Actions</h3>
            <Dropdown placement="bottom-start">
              <div slot="trigger">
                <Button variant="solid" color="green">Actions</Button>
              </div>
              <div slot="menu">
                <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">üìù Edit</span>
                </button>
                <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">üìã Duplicate</span>
                </button>
                <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <span class="font-medium">üì§ Share</span>
                </button>
                <hr class="my-1 border-gray-200">
                <button class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors">
                  <span class="font-medium">üóëÔ∏è Delete</span>
                </button>
              </div>
            </Dropdown>
          </div>

          <!-- Complex Content Menu -->
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-3">Rich Content</h3>
            <Dropdown placement="bottom-end" menuClass="w-72">
              <div slot="trigger">
                <Button variant="solid" color="purple">User Profile</Button>
              </div>
              <div slot="menu">
                <div class="px-4 py-3 border-b border-gray-200">
                  <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center text-white font-semibold">
                      JD
                    </div>
                    <div>
                      <p class="text-sm font-medium text-gray-900">John Doe</p>
                      <p class="text-xs text-gray-500">john@example.com</p>
                    </div>
                  </div>
                </div>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                  <div class="flex items-center space-x-2">
                    <span>üë§</span>
                    <span>View Profile</span>
                  </div>
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                  <div class="flex items-center space-x-2">
                    <span>‚öôÔ∏è</span>
                    <span>Account Settings</span>
                  </div>
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                  <div class="flex items-center space-x-2">
                    <span>üí≥</span>
                    <span>Billing</span>
                  </div>
                </a>
                <hr class="my-1">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                  <div class="flex items-center space-x-2">
                    <span>üö™</span>
                    <span>Sign Out</span>
                  </div>
                </a>
              </div>
            </Dropdown>
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Examples with Alpine.js -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Interactive Examples</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Counter Dropdown -->
          <div x-data="{ count: 0, selectedItem: 'No selection' }">
            <h3 class="text-lg font-semibold mb-3">Interactive Counter</h3>
            <div class="space-y-4">
              <p class="text-sm text-gray-600">Current count: <span x-text="count" class="font-bold text-blue-600"></span></p>
              <Dropdown placement="bottom-start">
                <div slot="trigger">
                  <Button variant="solid" color="blue">Counter Actions</Button>
                </div>
                <div slot="menu">
                  <button 
                    class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors"
                    x-on:click="count++"
                  >
                    ‚ûï Increment (+1)
                  </button>
                  <button 
                    class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors"
                    x-on:click="count += 5"
                  >
                    ‚¨ÜÔ∏è Add 5
                  </button>
                  <button 
                    class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors"
                    x-on:click="count--"
                  >
                    ‚ûñ Decrement (-1)
                  </button>
                  <hr class="my-1">
                  <button 
                    class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors"
                    x-on:click="count = 0"
                  >
                    üîÑ Reset to 0
                  </button>
                </div>
              </Dropdown>
            </div>
          </div>

          <!-- Selection Dropdown -->
          <div x-data="{ selectedColor: 'None', colors: ['Red', 'Blue', 'Green', 'Purple', 'Yellow'] }">
            <h3 class="text-lg font-semibold mb-3">Color Selection</h3>
            <div class="space-y-4">
              <p class="text-sm text-gray-600">Selected color: <span x-text="selectedColor" class="font-bold" :class="{ 'text-red-500': selectedColor === 'Red', 'text-blue-500': selectedColor === 'Blue', 'text-green-500': selectedColor === 'Green', 'text-purple-500': selectedColor === 'Purple', 'text-yellow-500': selectedColor === 'Yellow' }"></span></p>
              <Dropdown placement="bottom-start">
                <div slot="trigger">
                  <Button variant="outline" color="neutral">Choose Color</Button>
                </div>
                <div slot="menu">
                  <template x-for="color in colors" :key="color">
                    <button 
                      class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors flex items-center justify-between"
                      x-on:click="selectedColor = color"
                    >
                      <span x-text="color"></span>
                      <span x-show="selectedColor === color" class="text-green-500">‚úì</span>
                    </button>
                  </template>
                  <hr class="my-1">
                  <button 
                    class="w-full text-left px-4 py-2 text-sm text-gray-500 hover:bg-gray-100 transition-colors"
                    x-on:click="selectedColor = 'None'"
                  >
                    Clear Selection
                  </button>
                </div>
              </Dropdown>
            </div>
          </div>
        </div>
      </div>
    </Card>

    <!-- Custom Styling Examples -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Custom Trigger Styling -->
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-3">Custom Trigger</h3>
            <Dropdown placement="bottom-start">
              <div slot="trigger">
                <button class="px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full font-semibold hover:from-pink-600 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 shadow-lg">
                  Gradient Button ‚ñº
                </button>
              </div>
              <div slot="menu">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-50">Option 1</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-50">Option 2</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-pink-50">Option 3</a>
              </div>
            </Dropdown>
          </div>

          <!-- Custom Menu Styling -->
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-3">Custom Menu</h3>
            <Dropdown placement="bottom-start" menuClass="bg-gray-900 border-gray-700 text-white">
              <div slot="trigger">
                <Button variant="solid" color="neutral">Dark Menu</Button>
              </div>
              <div slot="menu">
                <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white">Dark Option 1</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white">Dark Option 2</a>
                <hr class="my-1 border-gray-700">
                <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white">Dark Option 3</a>
              </div>
            </Dropdown>
          </div>

          <!-- Wide Menu -->
          <div class="text-center">
            <h3 class="text-lg font-semibold mb-3">Wide Menu</h3>
            <Dropdown placement="bottom-end" menuClass="min-w-80">
              <div slot="trigger">
                <Button variant="outline" color="blue">Wide Dropdown</Button>
              </div>
              <div slot="menu">
                <div class="px-4 py-3">
                  <h4 class="font-semibold text-gray-900 mb-2">Extended Menu Content</h4>
                  <p class="text-sm text-gray-600 mb-3">This dropdown has custom width styling and contains more complex content.</p>
                  <div class="flex gap-2">
                    <button class="px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded">Tag 1</button>
                    <button class="px-3 py-1 bg-green-100 text-green-700 text-xs rounded">Tag 2</button>
                    <button class="px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded">Tag 3</button>
                  </div>
                </div>
                <hr class="my-1">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Regular Action</a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Another Action</a>
              </div>
            </Dropdown>
          </div>
        </div>
      </div>
    </Card>

    <!-- Click-outside and Transition Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Click-outside & Transition Test</h2>
        <div class="space-y-6">
          <div class="text-center">
            <p class="text-gray-600 mb-4">Test the click-outside functionality by opening a dropdown and clicking elsewhere. Watch the smooth transition animations.</p>
            <div class="flex justify-center gap-4">
              <Dropdown placement="bottom-start">
                <div slot="trigger">
                  <Button variant="solid" color="blue">Test Click-outside</Button>
                </div>
                <div slot="menu">
                  <div class="px-4 py-3">
                    <p class="text-sm text-gray-600">Click anywhere outside this menu to close it. Notice the smooth fade and scale transition.</p>
                  </div>
                  <hr class="my-1">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Menu Item 1</a>
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Menu Item 2</a>
                </div>
              </Dropdown>

              <Dropdown placement="bottom-end">
                <div slot="trigger">
                  <Button variant="outline" color="green">Another Test</Button>
                </div>
                <div slot="menu">
                  <div class="px-4 py-3">
                    <p class="text-sm text-gray-600">This dropdown also demonstrates the transition effects. Open both dropdowns and test interactions.</p>
                  </div>
                  <hr class="my-1">
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Action A</a>
                  <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Action B</a>
                </div>
              </Dropdown>
            </div>
          </div>

          <!-- Test Info -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <h4 class="font-semibold text-blue-900 mb-2">Transition Details</h4>
            <ul class="text-sm text-blue-800 space-y-1">
              <li>‚Ä¢ <strong>Enter:</strong> 100ms ease-out transition with opacity 0‚Üí1 and scale 95%‚Üí100%</li>
              <li>‚Ä¢ <strong>Leave:</strong> 75ms ease-in transition with opacity 1‚Üí0 and scale 100%‚Üí95%</li>
              <li>‚Ä¢ <strong>Click-outside:</strong> Automatically closes dropdown when clicking elsewhere</li>
              <li>‚Ä¢ <strong>z-index:</strong> Set to 50 to ensure proper layering</li>
            </ul>
          </div>
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">‚úì Working</Badge>
            <p class="text-sm">All placements working</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">‚úì Working</Badge>
            <p class="text-sm">Click-outside functionality</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">‚úì Working</Badge>
            <p class="text-sm">Smooth transitions</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">‚úì Working</Badge>
            <p class="text-sm">Alpine.js integration</p>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
          <h3 class="font-semibold text-gray-900 mb-2">Component Features Tested</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700">
            <div>‚úÖ bottom-start placement</div>
            <div>‚úÖ bottom-end placement</div>
            <div>‚úÖ top-start placement</div>
            <div>‚úÖ top-end placement</div>
            <div>‚úÖ Link menu items</div>
            <div>‚úÖ Button menu items</div>
            <div>‚úÖ Dividers (hr elements)</div>
            <div>‚úÖ Rich content menus</div>
            <div>‚úÖ Custom trigger styling</div>
            <div>‚úÖ Custom menu styling</div>
            <div>‚úÖ Alpine.js reactivity</div>
            <div>‚úÖ Click-outside behavior</div>
            <div>‚úÖ Transition animations</div>
            <div>‚úÖ Custom menu classes</div>
            <div>‚úÖ z-index layering</div>
            <div>‚úÖ Responsive design</div>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>