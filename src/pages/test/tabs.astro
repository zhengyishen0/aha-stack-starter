---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/pine/Card.astro';
import Button from '../../components/pine/Button.astro';
import Badge from '../../components/pine/Badge.astro';
import Tabs from '../../components/pine/Tabs.astro';
---

<Layout title="Tabs Component Test">
  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-4">Tabs Component Test</h1>
      <div class="flex justify-center gap-2 mb-6">
        <Button href="/test" variant="outline" color="neutral">← Back to Test Suite</Button>
        <Button href="/test/all" variant="ghost" color="neutral">View All</Button>
      </div>
    </div>

    <!-- Variants Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Variants</h2>
        
        <!-- Underline Variant -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold mb-3">Underline (Default)</h3>
          <Tabs 
            tabs={[
              { id: "overview", label: "Overview", content: "<p class='text-neutral-600'>This is the overview content for the underline variant.</p>" },
              { id: "analytics", label: "Analytics", content: "<p class='text-neutral-600'>Analytics data and charts would go here.</p>" },
              { id: "reports", label: "Reports", content: "<p class='text-neutral-600'>Detailed reports and insights.</p>" },
              { id: "settings", label: "Settings", content: "<p class='text-neutral-600'>Configuration options and preferences.</p>" }
            ]}
            defaultTab="overview"
            variant="underline"
          />
        </div>

        <!-- Pills Variant -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold mb-3">Pills</h3>
          <Tabs 
            tabs={[
              { id: "dashboard", label: "Dashboard", content: "<p class='text-neutral-600'>Dashboard overview with key metrics.</p>" },
              { id: "users", label: "Users", content: "<p class='text-neutral-600'>User management and profiles.</p>" },
              { id: "products", label: "Products", content: "<p class='text-neutral-600'>Product catalog and inventory.</p>" },
              { id: "orders", label: "Orders", content: "<p class='text-neutral-600'>Order history and tracking.</p>" }
            ]}
            defaultTab="dashboard"
            variant="pills"
          />
        </div>

        <!-- Enclosed Variant -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold mb-3">Enclosed</h3>
          <Tabs 
            tabs={[
              { id: "profile", label: "Profile", content: "<p class='text-neutral-600'>User profile information and settings.</p>" },
              { id: "account", label: "Account", content: "<p class='text-neutral-600'>Account details and billing information.</p>" },
              { id: "security", label: "Security", content: "<p class='text-neutral-600'>Security settings and two-factor authentication.</p>" },
              { id: "notifications", label: "Notifications", content: "<p class='text-neutral-600'>Notification preferences and settings.</p>" }
            ]}
            defaultTab="profile"
            variant="enclosed"
          />
        </div>
      </div>
    </Card>

    <!-- Disabled Tabs Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Disabled Tabs</h2>
        <Tabs 
          tabs={[
            { id: "active1", label: "Active Tab", content: "<p class='text-neutral-600'>This is an active tab that you can click.</p>" },
            { id: "disabled1", label: "Disabled Tab", content: "<p class='text-neutral-600'>This content won't be shown because the tab is disabled.</p>", disabled: true },
            { id: "active2", label: "Another Active", content: "<p class='text-neutral-600'>Another active tab for testing navigation.</p>" },
            { id: "disabled2", label: "Also Disabled", content: "<p class='text-neutral-600'>Another disabled tab.</p>", disabled: true }
          ]}
          defaultTab="active1"
          variant="underline"
        />
      </div>
    </Card>

    <!-- Dynamic Content Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Dynamic Content</h2>
        <div x-data="{ 
          currentTime: new Date().toLocaleTimeString(),
          counter: 0,
          updateTime() { this.currentTime = new Date().toLocaleTimeString(); },
          increment() { this.counter++; },
          decrement() { this.counter--; }
        }" x-init="setInterval(() => updateTime(), 1000)">
          <Tabs 
            tabs={[
              { 
                id: "clock", 
                label: "Live Clock", 
                content: `
                  <div class='p-4 bg-blue-50 rounded-lg'>
                    <h4 class='font-semibold mb-2'>Current Time</h4>
                    <p class='text-2xl font-mono' x-text='currentTime'></p>
                    <button x-on:click='updateTime()' class='mt-2 px-3 py-1 bg-blue-500 text-white rounded text-sm'>Update Now</button>
                  </div>
                `
              },
              { 
                id: "counter", 
                label: "Counter", 
                content: `
                  <div class='p-4 bg-green-50 rounded-lg'>
                    <h4 class='font-semibold mb-2'>Interactive Counter</h4>
                    <p class='text-3xl font-bold mb-4' x-text='counter'></p>
                    <div class='space-x-2'>
                      <button x-on:click='increment()' class='px-3 py-1 bg-green-500 text-white rounded text-sm'>+1</button>
                      <button x-on:click='decrement()' class='px-3 py-1 bg-red-500 text-white rounded text-sm'>-1</button>
                      <button x-on:click='counter = 0' class='px-3 py-1 bg-neutral-500 text-white rounded text-sm'>Reset</button>
                    </div>
                  </div>
                `
              },
              { 
                id: "form", 
                label: "Form Example", 
                content: `
                  <div class='p-4 bg-purple-50 rounded-lg'>
                    <h4 class='font-semibold mb-2'>Sample Form</h4>
                    <form class='space-y-3'>
                      <div>
                        <label class='block text-sm font-medium mb-1'>Name</label>
                        <input type='text' class='w-full px-3 py-2 border border-neutral-300 rounded-md' placeholder='Enter your name'>
                      </div>
                      <div>
                        <label class='block text-sm font-medium mb-1'>Email</label>
                        <input type='email' class='w-full px-3 py-2 border border-neutral-300 rounded-md' placeholder='Enter your email'>
                      </div>
                      <button type='submit' class='px-4 py-2 bg-purple-500 text-white rounded-md'>Submit</button>
                    </form>
                  </div>
                `
              }
            ]}
            defaultTab="clock"
            variant="pills"
          />
        </div>
      </div>
    </Card>

    <!-- Keyboard Navigation Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Keyboard Navigation Test</h2>
        <div class="mb-4 p-3 bg-blue-50 rounded-lg">
          <p class="text-sm text-blue-800">
            <strong>Instructions:</strong> Click on any tab to focus it, then use the following keys:
          </p>
          <ul class="text-sm text-blue-700 mt-2 space-y-1">
            <li>• <kbd class="px-1 py-0.5 bg-blue-200 rounded text-xs">Tab</kbd> - Navigate to next focusable element</li>
            <li>• <kbd class="px-1 py-0.5 bg-blue-200 rounded text-xs">Shift + Tab</kbd> - Navigate to previous focusable element</li>
            <li>• <kbd class="px-1 py-0.5 bg-blue-200 rounded text-xs">Enter</kbd> or <kbd class="px-1 py-0.5 bg-blue-200 rounded text-xs">Space</kbd> - Activate focused tab</li>
          </ul>
        </div>
        <Tabs 
          tabs={[
            { id: "tab1", label: "Tab 1", content: "<p class='text-neutral-600'>Content for tab 1. Try using keyboard navigation to switch between tabs.</p>" },
            { id: "tab2", label: "Tab 2", content: "<p class='text-neutral-600'>Content for tab 2. Notice the focus indicators when using keyboard navigation.</p>" },
            { id: "tab3", label: "Tab 3", content: "<p class='text-neutral-600'>Content for tab 3. The tabs should be easily accessible via keyboard.</p>" },
            { id: "tab4", label: "Disabled", content: "<p class='text-neutral-600'>This content won't show.</p>", disabled: true },
            { id: "tab5", label: "Tab 5", content: "<p class='text-neutral-600'>Content for tab 5. Last active tab in this group.</p>" }
          ]}
          defaultTab="tab1"
          variant="underline"
        />
      </div>
    </Card>

    <!-- Pills Variant Moving Marker Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Pills Moving Marker Test</h2>
        <div class="mb-4 p-3 bg-amber-50 rounded-lg">
          <p class="text-sm text-amber-800">
            <strong>Test Focus:</strong> Click between tabs to see the smooth animated marker movement. 
            The blue background should smoothly transition between tab positions.
          </p>
        </div>
        <Tabs 
          tabs={[
            { id: "short", label: "Short", content: "<p class='text-neutral-600'>Short tab with minimal content to test marker sizing.</p>" },
            { id: "medium-length", label: "Medium Length", content: "<p class='text-neutral-600'>Medium length tab to test how the marker adapts to different tab widths.</p>" },
            { id: "very-long-tab-name", label: "Very Long Tab Name", content: "<p class='text-neutral-600'>Very long tab name to test marker adaptation to wide tabs.</p>" },
            { id: "a", label: "A", content: "<p class='text-neutral-600'>Single character tab to test minimum width handling.</p>" }
          ]}
          defaultTab="short"
          variant="pills"
        />
      </div>
    </Card>

    <!-- Custom Styling Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Custom Styling</h2>
        <div class="space-y-6">
          <!-- Custom Tab Classes -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Custom Container Classes</h3>
            <Tabs 
              tabs={[
                { id: "custom1", label: "Tab 1", content: "<p class='text-neutral-600'>Custom styled tabs container.</p>" },
                { id: "custom2", label: "Tab 2", content: "<p class='text-neutral-600'>With rounded corners and shadow.</p>" },
                { id: "custom3", label: "Tab 3", content: "<p class='text-neutral-600'>Enhanced visual styling.</p>" }
              ]}
              defaultTab="custom1"
              variant="enclosed"
              class="bg-neutral-50 p-4 rounded-lg shadow-sm"
              contentClass="bg-white p-4 rounded-lg border"
            />
          </div>

          <!-- Large Content Area -->
          <div>
            <h3 class="text-lg font-semibold mb-3">Large Content Area</h3>
            <Tabs 
              tabs={[
                { 
                  id: "large1", 
                  label: "Documentation", 
                  content: `
                    <div class='prose max-w-none'>
                      <h4>Getting Started</h4>
                      <p>This is an example of a tab with a large content area. You can include multiple paragraphs, lists, and other content.</p>
                      <ul>
                        <li>Feature 1: Easy to use</li>
                        <li>Feature 2: Customizable</li>
                        <li>Feature 3: Accessible</li>
                      </ul>
                      <p>The content area will expand to accommodate all your content while maintaining proper spacing and typography.</p>
                    </div>
                  `
                },
                { 
                  id: "large2", 
                  label: "API Reference", 
                  content: `
                    <div class='font-mono text-sm'>
                      <h4 class='font-sans text-lg font-semibold mb-3'>API Methods</h4>
                      <div class='bg-neutral-100 p-3 rounded mb-3'>
                        <strong>getTabs()</strong><br>
                        <span class='text-neutral-600'>Returns: Array&lt;Tab&gt;</span><br>
                        <span class='text-neutral-600'>Description: Gets all available tabs</span>
                      </div>
                      <div class='bg-neutral-100 p-3 rounded mb-3'>
                        <strong>setActiveTab(id: string)</strong><br>
                        <span class='text-neutral-600'>Returns: void</span><br>
                        <span class='text-neutral-600'>Description: Sets the active tab by ID</span>
                      </div>
                    </div>
                  `
                }
              ]}
              defaultTab="large1"
              variant="underline"
              contentClass="min-h-[200px] p-6 bg-white border rounded-lg"
            />
          </div>
        </div>
      </div>
    </Card>

    <!-- Interactive Alpine.js Test -->
    <Card class="mb-8">
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Advanced Alpine.js Integration</h2>
        <div x-data="{ 
          selectedColor: 'blue',
          message: 'Hello from Alpine!',
          todos: ['Learn Alpine.js', 'Build awesome tabs', 'Test everything'],
          newTodo: '',
          addTodo() {
            if (this.newTodo.trim()) {
              this.todos.push(this.newTodo.trim());
              this.newTodo = '';
            }
          },
          removeTodo(index) {
            this.todos.splice(index, 1);
          }
        }">
          <Tabs 
            tabs={[
              { 
                id: "colors", 
                label: "Color Picker", 
                content: `
                  <div class='space-y-4'>
                    <div>
                      <label class='block text-sm font-medium mb-2'>Choose a color:</label>
                      <select x-model='selectedColor' class='px-3 py-2 border border-neutral-300 rounded-md'>
                        <option value='blue'>Blue</option>
                        <option value='red'>Red</option>
                        <option value='green'>Green</option>
                        <option value='purple'>Purple</option>
                      </select>
                    </div>
                    <div class='p-4 rounded-lg' :class='{
                      \"bg-blue-100 text-blue-800\": selectedColor === \"blue\",
                      \"bg-red-100 text-red-800\": selectedColor === \"red\",
                      \"bg-green-100 text-green-800\": selectedColor === \"green\",
                      \"bg-purple-100 text-purple-800\": selectedColor === \"purple\"
                    }'>
                      <p>Selected color: <span x-text='selectedColor' class='font-semibold'></span></p>
                    </div>
                  </div>
                `
              },
              { 
                id: "message", 
                label: "Message Editor", 
                content: `
                  <div class='space-y-4'>
                    <div>
                      <label class='block text-sm font-medium mb-2'>Edit your message:</label>
                      <input x-model='message' type='text' class='w-full px-3 py-2 border border-neutral-300 rounded-md' placeholder='Type a message...'>
                    </div>
                    <div class='p-4 bg-neutral-100 rounded-lg'>
                      <p class='text-lg' x-text='message'></p>
                      <p class='text-sm text-neutral-600 mt-2'>Character count: <span x-text='message.length'></span></p>
                    </div>
                  </div>
                `
              },
              { 
                id: "todos", 
                label: "Todo List", 
                content: `
                  <div class='space-y-4'>
                    <div class='flex gap-2'>
                      <input x-model='newTodo' @keyup.enter='addTodo()' type='text' class='flex-1 px-3 py-2 border border-neutral-300 rounded-md' placeholder='Add a new todo...'>
                      <button @click='addTodo()' class='px-4 py-2 bg-blue-500 text-white rounded-md'>Add</button>
                    </div>
                    <div class='space-y-2'>
                      <template x-for='(todo, index) in todos' :key='index'>
                        <div class='flex items-center gap-2 p-2 bg-neutral-50 rounded'>
                          <span x-text='todo' class='flex-1'></span>
                          <button @click='removeTodo(index)' class='px-2 py-1 bg-red-500 text-white rounded text-sm'>Remove</button>
                        </div>
                      </template>
                    </div>
                    <p class='text-sm text-neutral-600'>Total todos: <span x-text='todos.length'></span></p>
                  </div>
                `
              }
            ]}
            defaultTab="colors"
            variant="pills"
          />
        </div>
      </div>
    </Card>

    <!-- Status Summary -->
    <Card>
      <div class="p-6">
        <h2 class="text-2xl font-bold mb-4">Test Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">All variants render correctly</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Disabled tabs functionality</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Moving marker animation</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Keyboard navigation</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Dynamic content updates</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Alpine.js integration</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Custom styling support</p>
          </div>
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <Badge color="green" class="mb-2">✓ Working</Badge>
            <p class="text-sm">Content slot support</p>
          </div>
        </div>
      </div>
    </Card>
  </main>
</Layout>