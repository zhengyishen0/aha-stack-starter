---
export interface Props {
  headers: string[];
  rows: (string | number)[][];
  variant?: 'default' | 'striped' | 'bordered';
  context?: 'default' | 'compact' | 'dense';
  hover?: boolean;
  responsive?: boolean;
  class?: string;
  [key: string]: any; // Allow any Alpine.js attributes
}

const { 
  headers,
  rows,
  variant = 'default',
  context = 'default',
  hover = false,
  responsive = true,
  class: className = "",
  ...rest
} = Astro.props;

// Generate class names using true design system
const getComponentClasses = () => {
  const baseClass = 'table';
  const contextClass = context !== 'default' ? `${context}-table` : '';
  return `${baseClass} ${contextClass} ${className}`.trim();
};

const getHeaderClasses = () => {
  return 'table-header';
};

const getRowClasses = () => {
  return 'table-row';
};

const getCellClasses = () => {
  return 'table-cell';
};
---

<!-- 
Pine UI Table Component

Usage:
<Table 
  headers={['Name', 'Email', 'Role']}
  rows={[
    ['John Doe', 'john@example.com', 'Admin'],
    ['Jane Smith', 'jane@example.com', 'User']
  ]}
  striped
  hover
  responsive
/>

Props:
- headers: Array of header strings
- rows: Array of row data (each row is an array of strings/numbers)
- striped: Alternating row background colors
- bordered: Add borders to table and cells
- hover: Add hover effect on rows
- responsive: Enable horizontal scrolling on small screens
- compact: Reduce padding for compact view
- class: Additional CSS classes
-->

{responsive ? (
  <div class="table-container">
    <table 
      class={getComponentClasses()}
      data-variant={variant !== 'default' ? variant : null}
      data-state={hover ? 'hover' : null}
      {...rest}
    >
      <thead class="table-thead">
        <tr>
          {headers.map((header) => (
            <th scope="col" class={getHeaderClasses()}>
              {header}
            </th>
          ))}
        </tr>
      </thead>
      <tbody class="table-tbody">
        {rows.map((row) => (
          <tr class={getRowClasses()}>
            {row.map((cell) => (
              <td class={getCellClasses()}>
                {cell}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  </div>
) : (
  <table 
    class={getComponentClasses()}
    data-variant={variant !== 'default' ? variant : null}
    data-state={hover ? 'hover' : null}
    {...rest}
  >
    <thead class="table-thead">
      <tr>
        {headers.map((header) => (
          <th scope="col" class={getHeaderClasses()}>
            {header}
          </th>
        ))}
      </tr>
    </thead>
    <tbody class="table-tbody">
      {rows.map((row) => (
        <tr class={getRowClasses()}>
          {row.map((cell) => (
            <td class={getCellClasses()}>
              {cell}
            </td>
          ))}
        </tr>
      ))}
    </tbody>
  </table>
)}