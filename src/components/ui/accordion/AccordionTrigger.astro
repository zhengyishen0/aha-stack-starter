---
import { cn } from '@/lib/utils';
import { ChevronDown, Plus, Minus } from 'lucide-astro';

export interface Props {
  iconType?: 'chevron' | 'plus';
  className?: string;
  text?: string;
  [key: string]: any;
}

const {
  iconType = 'chevron',
  className,
  text,
  ...alpineProps
} = Astro.props;
---

<button 
  @click="setActiveAccordion(id)"
  {...alpineProps}
  :class={`"${cn(
    'flex items-center justify-between w-full px-5 py-4 font-semibold text-left select-none text-neutral-800',
    className
  )}"`}
  type="button"
>
  <span class="flex-1">
    {text ? (
      <span x-text={text}></span>
    ) : (
      <slot />
    )}
  </span>
  
  <!-- Icon Area -->
  <div class="relative flex items-center justify-center w-6 h-6 duration-300 ease-out ml-4">
    <!-- Custom Icon Slot -->
    <slot name="icon">
      <!-- Default Icons -->
      {iconType === 'plus' ? (
        <div class="relative flex items-center justify-center">
          <Plus 
            class="w-4 h-4 text-neutral-500 group-hover:text-neutral-800 transition-all duration-300"
            :class="{ 'opacity-0': activeAccordion==id }"
          />
          <Minus 
            class="absolute w-4 h-4 text-neutral-500 group-hover:text-neutral-800 transition-all duration-300"
            :class="{ 'opacity-0': activeAccordion!=id }"
          />
        </div>
      ) : (
        <ChevronDown 
          class="w-5 h-5 text-neutral-500 group-hover:text-neutral-800 transition-transform duration-200"
          :class="{ 'rotate-180': activeAccordion==id }"
        />
      )}
    </slot>
  </div>
</button>