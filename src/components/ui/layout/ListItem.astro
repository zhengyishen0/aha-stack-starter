---
import { cn } from '@/lib/utils';
import { type LayoutComponentProps, universalVariants, type UniversalSpacing } from '@/lib/component-variants';

export interface Props extends LayoutComponentProps {
  padding?: UniversalSpacing;
  gap?: UniversalSpacing;
}

const {
  justify = 'start',
  align = 'center',
  overflow = 'expand',
  padding = 'sm',
  gap = 'sm',
  class: className = '',
  ...alpineProps
} = Astro.props;

// Extract x-for and x-key from alpineProps so they don't get passed to the div
const { 'x-for': xFor, 'x-key': xKey, ...restProps } = alpineProps;

const classes = cn(
  'flex flex-row w-full min-h-[2.5rem]',
  universalVariants.justify[justify],
  universalVariants.align[align],
  universalVariants.padding[padding],
  universalVariants.gap[gap],
  universalVariants.overflow[overflow],
  className
);
---

{
  xFor ? (
    <template x-for={xFor} x-key={xKey}>
      <div class={classes} {...restProps}>
        <slot />
      </div>
    </template>
  ) : (
    <div class={classes} {...restProps}>
      <slot />
    </div>
  )
}