---
import { cn } from '@/lib/utils';
import {
    createLayoutComponent,
    universalVariants,
    type UniversalSpacing,
    type UniversalJustify,
    type UniversalAlign,
    type UniversalLayoutSize
} from '@/lib/component-variants';

const rowVariants = createLayoutComponent('flex flex-row', {
    overflow: {
        auto: universalVariants.overflow.auto, // Content scrolls when needed
        fixed: universalVariants.overflow.fixed, // Content has fixed boundaries
        wrap: universalVariants.overflow.wrap, // Wrap to new rows
    },
});

export interface Props {
    justify?: UniversalJustify;
    align?: UniversalAlign;
    overflow?: 'auto' | 'fixed' | 'wrap';
    gap?: UniversalSpacing;
    size?: UniversalLayoutSize;
    class?: string;
    [key: string]: any; // Alpine.js pass-through
}

const {
    justify = 'start',
    align = 'center',
    overflow = 'fixed',
    gap = 'sm',
    size = 'fit',
    class: className = '',
    ...alpineProps
} = Astro.props;

const overflowClasses = {
    auto: 'overflow-auto',
    fixed: 'overflow-hidden',
    wrap: 'flex-wrap',
};

const classes = cn(
    'flex flex-row',
    size === 'fit' ? 'w-auto flex-shrink-0' : '',
    rowVariants({ justify, align }),
    overflowClasses[overflow],
    universalVariants.gap[gap],
    universalVariants.layoutSize[size],
    className
);
---

<div class={classes} {...alpineProps}>
    <slot />
</div>
