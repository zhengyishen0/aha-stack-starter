---
// Import co-located component styles
import './badge.css';

export interface Props {
  variant?: 'solid' | 'outline' | 'soft';
  color?: 'primary' | 'success' | 'warning' | 'destructive';
  shape?: 'square' | 'round' | 'pill';
  pulsing?: boolean;
  removable?: boolean;
  class?: string;
  [key: string]: any; // Allow any Alpine.js attributes
}

const { 
  variant = 'solid',
  color = 'primary',
  shape = 'pill',
  pulsing = false,
  removable = false,
  class: className = "",
  ...rest
} = Astro.props;

// Generate CUBE CSS classes
const classes = [
  'badge',
  `color-${color}`,
  variant !== 'solid' && `variant-${variant}`,
  shape !== 'pill' && `shape-${shape}`,
  pulsing && 'is-pulsing',
  removable && 'is-removable',
  className
].filter(Boolean).join(' ');
---

<!-- 
TRUE Design System Badge Component

Usage:
<Badge>Default</Badge>
<Badge color="success">Completed</Badge>
<Badge color="destructive" variant="outline">Error</Badge>
<Badge pulsing><Icon /> Live</Badge>
<Badge><StatusIcon /></Badge>

Focused Props (covering 80% of use cases):
- variant: solid (default), outline, soft
- color: primary (default), success, warning, destructive
- shape: square, round, pill (default)
- pulsing: boolean - subtle animation
- removable: boolean - shows close icon

For edge cases (size, dot variant, neutral colors) use CSS classes:
<Badge class="text-xs">Small badge</Badge>
<Badge class="variant-dot">Dot badge</Badge>
<Badge class="color-neutral">Neutral badge</Badge>
-->

<span 
  class={classes}
  {...rest}
>
  <slot />
  {removable && (
    <svg 
      width="12" 
      height="12" 
      viewBox="0 0 24 24" 
      fill="none" 
      stroke="currentColor" 
      stroke-width="2"
    >
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  )}
</span>