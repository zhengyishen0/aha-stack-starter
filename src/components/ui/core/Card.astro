---
// Import co-located component styles
import './card.css';

export interface Props {
  variant?: 'flat' | 'elevated';
  size?: 'sm' | 'md' | 'lg';
  shape?: 'square' | 'round' | 'pill';
  clickable?: boolean;
  href?: string;
  class?: string;
  headerClass?: string;
  bodyClass?: string;
  footerClass?: string;
  [key: string]: any; // Allow any Alpine.js attributes
}

const { 
  variant = 'flat',
  size = 'md',
  shape = 'round',
  clickable = false,
  href,
  class: className = "",
  headerClass = "",
  bodyClass = "",
  footerClass = "",
  ...rest
} = Astro.props;

// Generate CUBE CSS classes
const classes = [
  'card',
  variant !== 'flat' && `variant-${variant}`,
  `size-${size}`,
  shape !== 'round' && `shape-${shape}`,
  (clickable || href) && 'clickable',
  className
].filter(Boolean).join(' ');

const Tag = href ? 'a' : 'article';
const tagProps = href 
  ? { href, style: "text-decoration: none;" }
  : {};
---

<!-- 
TRUE Design System Card Component

Usage:
<Card>
  <div slot="header">
    <h2>Title</h2>
  </div>
  <div slot="body">
    <p>Content goes here...</p>
  </div>
  <div slot="footer">
    <Button>Action</Button>
  </div>
</Card>

<Card variant="elevated" size="md">
  <p>Simple card content</p>
</Card>

<Card href="/link" clickable>
  <p>Clickable card</p>
</Card>

Focused Props (covering 80% of use cases):
- variant: flat (default), elevated
- size: sm, md (default), lg
- shape: square, round (default), pill
- clickable: makes card interactive
- href: makes card a link

For edge cases (colors, custom shapes, states) use CSS classes:
<Card class="color-primary">Colored card</Card>
<Card class="shape-rounded-2xl">Custom shape card</Card>
<Card class="is-selected">Selected state</Card>
-->

<Tag 
  class={classes}
  {...tagProps}
  {...rest}
>
  <!-- Header -->
  {Astro.slots.header && (
    <header class={`card-header ${headerClass}`}>
      <slot name="header" />
    </header>
  )}
  
  <!-- Body - main content area -->
  <div class={`card-body ${bodyClass}`}>
    <slot name="body" />
    <slot />
  </div>
  
  <!-- Footer -->
  {Astro.slots.footer && (
    <footer class={`card-footer ${footerClass}`}>
      <slot name="footer" />
    </footer>
  )}
</Tag>