---
export interface Props {
  state?: 'active' | 'completed' | 'pending' | 'disabled';
  as?: 'span' | 'div' | 'p' | 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | 'strong' | 'em' | 'small';
  class?: string;
  [key: string]: any; // Allow any Alpine.js attributes
}

const { 
  state = 'active',
  as: Element = 'span',
  class: className = "",
  ...rest
} = Astro.props;

// Generate class names using true design system
const getStateTextClasses = () => {
  const baseClass = 'state-text';
  const stateClass = state !== 'active' ? `state-text-${state}` : '';
  
  return `${baseClass} ${stateClass} ${className}`.trim();
};
---

<!-- 
TRUE Design System Text Component

Usage:
<Text state="active">Active task</Text>
<Text state="completed">Completed task</Text>
<Text state="pending" as="p">Pending paragraph</Text>
<Text state="disabled" as="h3">Disabled heading</Text>
<Text as="h2" slot="header">Header text</Text>

Props:
- state: active (default), completed, pending, disabled
- as: span (default), div, p, h1-h6, strong, em, small
- slot: any slot name (passed through)
- All other props passed through (Alpine.js, classes, etc.)
-->

<Element class={getStateTextClasses()} {...rest}>
  <slot />
</Element>

<style>
  .state-text {
    line-height: 1.5;
  }
  
  .state-text-active {
    color: var(--color-text);
    font-weight: 500;
  }
  
  .state-text-completed {
    color: var(--color-text-secondary);
    text-decoration: line-through;
  }
  
  .state-text-pending {
    color: var(--color-text-secondary);
    font-style: italic;
  }
  
  .state-text-disabled {
    color: var(--color-text-disabled, var(--neutral-400));
    opacity: 0.6;
  }
</style>