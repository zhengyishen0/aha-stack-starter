---
export interface Props {
  direction?: 'left' | 'right';
  speed?: 'slow' | 'normal' | 'fast';
  context?: 'default' | 'subtle' | 'prominent';
  pauseOnHover?: boolean;
  class?: string;
  [key: string]: any; // Allow any Alpine.js attributes
}

const { 
  direction = 'left',
  speed = 'normal',
  context = 'default',
  pauseOnHover = false,
  class: className = "",
  ...rest
} = Astro.props;

// Generate class names using true design system
const getComponentClasses = () => {
  const baseClass = 'marquee';
  const contextClass = context !== 'default' ? `${context}-marquee` : '';
  return `${baseClass} ${contextClass} ${className}`.trim();
};
---

<!-- 
TRUE Design System Marquee Component

Usage:
<Marquee>
  <div>Item 1</div>
  <div>Item 2</div>
  <div>Item 3</div>
</Marquee>

<Marquee direction="reverse" speed="fast" context="prominent">
  <div>Fast reverse marquee</div>
</Marquee>

Contextual Variants: default, subtle, prominent
-->

<div 
  x-data
  x-init="
    $nextTick(() => {
      const content = $refs.content;
      const item = $refs.item;
      const clone = item.cloneNode(true);
      content.appendChild(clone);
    });
  "
  class={getComponentClasses()}
  data-direction={direction !== 'left' ? 'reverse' : null}
  data-speed={speed !== 'normal' ? speed : null}
  data-state={pauseOnHover ? 'paused' : null}
  {...rest}
>
  <!-- Left gradient fade -->
  <div class="marquee-gradient marquee-gradient-left"></div>
  
  <!-- Right gradient fade -->
  <div class="marquee-gradient marquee-gradient-right"></div>
  
  <!-- Marquee content -->
  <div 
    x-ref="content" 
    class="marquee-content"
  >
    <div x-ref="item" class="marquee-item">
      <slot />
    </div>
  </div>
</div>

