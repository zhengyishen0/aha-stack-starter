---
import { cn } from "@/lib/utils";

export interface Props {
  src: string;
  alt: string;
  class?: string;
  [key: string]: any; // Alpine.js pass-through
}

const { src, alt, class: className, ...alpineProps } = Astro.props;

// Alpine.js data for handling image loading states
const xDataValue = `{
  imageLoaded: false,
  imageError: false,
  handleLoad() {
    this.imageLoaded = true;
    this.imageError = false;
  },
  handleError() {
    this.imageError = true;
    this.imageLoaded = false;
  }
}`;
---

<img 
  x-data={xDataValue}
  x-show="!imageError"
  x-on:load="handleLoad"
  x-on:error="handleError"
  src={src}
  alt={alt}
  class={cn("aspect-square h-full w-full object-cover", className)}
  {...alpineProps}
/>