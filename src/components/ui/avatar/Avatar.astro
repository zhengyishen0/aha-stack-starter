---
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "@/lib/utils";

const avatarVariants = cva(
  "relative flex shrink-0 overflow-hidden rounded-full",
  {
    variants: {
      size: {
        sm: "h-8 w-8",
        default: "h-10 w-10", 
        lg: "h-12 w-12",
        xl: "h-16 w-16"
      }
    },
    defaultVariants: {
      size: "default"
    }
  }
);

export interface Props extends VariantProps<typeof avatarVariants> {
  class?: string;
  href?: string;
  [key: string]: any; // Alpine.js pass-through
}

const { size, class: className, href, ...alpineProps } = Astro.props;

const Tag = href ? 'a' : 'div';
---

<Tag 
  class={cn(avatarVariants({ size }), className)}
  {...(href ? { href } : {})}
  {...alpineProps}
>
  <slot />
</Tag>